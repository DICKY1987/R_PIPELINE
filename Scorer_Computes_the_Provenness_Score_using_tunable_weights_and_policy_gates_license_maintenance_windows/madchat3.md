Awesome set of modules. Here’s a tight plan that (1) tells you **how to stage the work** and (2) gives you **exact starter files per module folder** using the Two-ID naming pattern `{TID}.{role}[.{name}].{ext}` (the `{TID}` hash shard is auto-generated by your nameguard; use placeholders like `DR-XXX` until the guard renames).

# Work plan at a glance (dependency-aware, parallel where safe)

1. **Backplane first (Phase 0)** → Ledger, Policy Pack, Caching/Rate-Limiter, Concurrency Controller, Observability.
2. **Intake & routing (Phase 1)** → Plan Ingestor → Work-Stream Planner → Domain Router → Goal Normalizer → Query Expander.
3. **Discovery & scoring (Phase 2)** → Discovery Adapters → Feature Extractors → Scorer.
4. **Synthesis & patch (Phase 3)** → Synthesizer → Structured Patcher.
5. **Quality gates (Phase 4)** → Guardrails → Verifier → Error Auto-Repair (loop once).
6. **Decision & export (Phase 5)** → Selector → Exporter → Provenance/Rollback Manager.
7. **Knowledge & CI glue (Phase 6)** → Knowledge Reuse Manager → Playbook Promoter → CI/Pre-Commit Integrator.

Backplane runs “always on”; Phases 2–4 can fan out per work-stream with **Work-Stream Planner** controlling concurrency.

---

# Per-module starter files (drop these into each folder)

Each line is a file you should have. Replace `{TID}` with the module’s Two-ID (e.g., `DR-5K9`) automatically via your nameguard.

## Plan_Ingestor_…_MOD

* `{TID}.run.py`
* `{TID}.config.yaml`
* `{TID}.schema.contract.json`
* `{TID}.example.plan.json`
* `api.py`

## Work_Stream_Planner_…_MOD

* `{TID}.run.py`
* `{TID}.graph_partition.py`
* `{TID}.locks.py`
* `{TID}.config.yaml`
* `{TID}.schema.contract.json`
* `api.py`

## Domain_Router_…_MOD

* `{TID}.run.py`
* `{TID}.route.py`
* `{TID}.rules.yaml`            # glob/domain rules
* `{TID}.config.yaml`
* `{TID}.schema.contract.json`
* `api.py`

## Goal_Normalizer_…_MOD

* `{TID}.run.py`
* `{TID}.normalize_goal.py`
* `{TID}.synonyms.yaml`
* `{TID}.config.yaml`
* `{TID}.schema.contract.json`
* `api.py`

## Query_Expander_…_MOD

* `{TID}.run.py`
* `{TID}.expand.py`
* `{TID}.synonyms.yaml`         # may import from Goal_Normalizer
* `{TID}.config.yaml`
* `{TID}.schema.queries.json`
* `api.py`

## Discovery_Adapters_…_MOD

* `{TID}.run.py`
* `adapters/{TID}.adapter.github.py`
* `adapters/{TID}.adapter.pypi.py`
* `adapters/{TID}.adapter.docs.py`
* `{TID}.rate_limit.py`
* `{TID}.cache_store.py`
* `{TID}.config.yaml`
* `{TID}.schema.evidence.json`
* `api.py`

## Feature_Extractors_…_MOD

* `{TID}.run.py`
* `{TID}.extract_license.py`
* `{TID}.extract_activity.py`
* `{TID}.extract_examples.py`
* `{TID}.config.yaml`
* `{TID}.schema.features.json`
* `api.py`

## Scorer_…_MOD

* `{TID}.run.py`
* `{TID}.scoring.py`
* `profiles/{TID}.weights.default.yaml`
* `{TID}.policy_gates.yaml`     # license/recency windows
* `{TID}.schema.scores.json`
* `{TID}.config.yaml`
* `api.py`

## Synthesizer_…_MOD

* `{TID}.run.py`
* `{TID}.synth.py`
* `renderers/{TID}.renderer.python_invoke.py`
* `renderers/{TID}.renderer.powershell_ib.py`
* `renderers/{TID}.renderer.gha.py`
* `templates/invoke_watch_v1/…` # template files
* `{TID}.schema.artifact.json`
* `{TID}.config.yaml`
* `api.py`

## Structured_Patcher_…_MOD

* `{TID}.run.py`
* `{TID}.patch_ast_py.py`
* `{TID}.patch_ps1.py`
* `{TID}.patch_toml.py`
* `{TID}.patch_yaml.py`
* `{TID}.schema.patch_plan.json`
* `{TID}.config.yaml`
* `api.py`

## Guardrails_…_MOD

* `{TID}.run.py`
* `{TID}.lint_py.py`
* `{TID}.lint_ps.ps1`
* `{TID}.schema_check.py`
* `rules/{TID}.structure.yaml`
* `rules/{TID}.policy.yaml`
* `{TID}.schema.results.json`
* `{TID}.config.yaml`
* `api.py`

## Verifier_…_MOD

* `{TID}.run.py`
* `{TID}.verify_py.py`
* `{TID}.verify_ps.ps1`
* `{TID}.probe.py`
* `{TID}.matrix.yaml`           # OS/tool matrix
* `{TID}.schema.verification.json`
* `{TID}.config.yaml`
* `api.py`

## Error_Auto_Repair_…_MOD

* `{TID}.run.py`
* `{TID}.autofix_py.py`
* `{TID}.autofix_ps.ps1`
* `{TID}.fix_rules.yaml`
* `{TID}.config.yaml`
* `api.py`

## Selector_…_MOD

* `{TID}.run.py`
* `{TID}.select.py`
* `{TID}.thresholds.yaml`
* `{TID}.schema.selection.json`
* `{TID}.config.yaml`
* `api.py`

## Exporter_…_MOD

* `{TID}.run.py`
* `{TID}.export.py`
* `{TID}.artifact_index.schema.json`
* `{TID}.pr_metadata.json.tmpl`
* `{TID}.config.yaml`
* `api.py`

## Provenance_Rollback_Manager_…_MOD

* `{TID}.run.py`
* `{TID}.provenance.py`         # embed template/source ULIDs
* `{TID}.rollback.py`
* `{TID}.header.tmpl`
* `{TID}.config.yaml`
* `api.py`

## Knowledge_Reuse_Manager_…_MOD

* `{TID}.run.py`
* `{TID}.reuse.py`
* `{TID}.index.json`            # capability→artifact map (generated)
* `{TID}.config.yaml`
* `api.py`

## Playbook_Promoter_…_MOD

* `{TID}.run.py`
* `{TID}.promote.py`
* `{TID}.schema.playbook.json`
* `{TID}.config.yaml`
* `api.py`

## CI_Pre_Commit_Integrator_…_MOD

* `{TID}.run.py`
* `{TID}.emit_precommit.py`
* `{TID}.emit_ci.py`
* `{TID}.config.yaml`
* `api.py`

## Caching_Rate_Limiter_…_MOD

* `{TID}.run.py`
* `{TID}.cache.py`
* `{TID}.ratelimit.py`
* `{TID}.config.yaml`
* `api.py`

## Concurrency_Controller_…_MOD

* `{TID}.run.py`
* `{TID}.queue.py`
* `{TID}.limits.yaml`
* `{TID}.config.yaml`
* `api.py`

## Ledger_…_MOD

* `{TID}.run.py`
* `{TID}.append.py`             # atomic JSONL appends
* `{TID}.schema.ledger.json`
* `{TID}.config.yaml`
* `api.py`

## Policy_Pack_…_MOD

* `{TID}.run.py`
* `{TID}.policy.yaml`           # licenses, maintenance, OS matrix
* `scoring_profiles/{TID}.override.yaml`
* `{TID}.policy.schema.json`
* `api.py`

## Observability_…_MOD

* `{TID}.run.py`
* `{TID}.metrics.py`
* `{TID}.log_conf.yaml`
* `dash/{TID}.overview.yaml`
* `{TID}.config.yaml`
* `api.py`

## Spike_Harness_…_MOD

* `{TID}.run.py`
* `{TID}.harness.py`
* `scenarios/{TID}.quick.yaml`
* `{TID}.schema.spike.json`
* `{TID}.config.yaml`
* `api.py`

---

## A couple of guardrails to keep it organized automatically

* Keep a single **`/PIPELINE_MODS/registry.yaml`** mapping folder → `{mnemonic, hash_shard, color}`.
* Run **nameguard** on add/rename/delete to prefix files with `{TID}` and (re)generate a stable `api.py` that your orchestrator imports.
* Each `{TID}.run.py` must accept `--in`/`--out` JSON so modules chain cleanly; logs go to module-scoped JSONL under `logs/`.

